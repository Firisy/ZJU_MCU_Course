ORG 0030H
SJMP START
ORG 0080H

START:
MOV DPTR,#TABLE2
MOV P1,#00H
MOV P2,#00H
MOV P3,#00H

LOOP2:
MOV R5,#00H ;设置点亮的数码管的列号
LOOP1:
MOV P1,R5   
MOV A,R5
ADD A,ACC   ;上半部分的数码管点亮数据存储在2*R5中
MOVC A,@A+DPTR  
MOV P2,A    ;点亮数码管上半部分
MOV A,R5
ADD A,ACC
INC A       ;下半部分的数码管点亮数据存储在2*R5+1的字节中
MOVC A,@A+DPTR
MOV P3,A    ;点亮数码管下半部分

CALL DELAY1 ;保持一段时间的点亮

INC R5  
CJNE R5,#10H,LOOP1  ;循环点亮
SJMP LOOP2          ;若R5=10H,则重新置0，重新点亮


SJMP START



DELAY1:
       MOV R3,#010H
       D1:
       MOV R4,#20H
       DJNZ R4,$
       DJNZ R3,D1
RET

TABLE:
DB 0FFH,0FFH,0FFH,0FFH,0FFH,0FFH,0FFH,0FFH,0FFH,0FFH,0FFH,0FFH,0FFH,0FFH,0FFH,0FFH,0FFH,0FFH,0FFH,0FFH,0FFH,0FFH,0FFH,0FFH,0FFH,0FFH,0FFH,0FFH,0FFH,0FFH,0FFH,0FFH
TABLE2:
DB 02H,00H,22H,00H,2AH,0FFH,2AH,0A8H,0FEH,0A8H,2AH,0A9H,2AH,0FFH,12H,80H,24H,92H,0E4H,91H,2FH,0FEH,34H,90H,24H,90H,0FH,0F8H,04H,80H,00H,00H,

END